{% extends "share_layout/base.html" %}
{% block title %}博客{% endblock title %}
{% load staticfiles %}
{% block header_extends %}
<link href="{% static 'blog.css' %}" rel="stylesheet">
{% endblock header_extends %}
{% block nav_blog_active %}active{% endblock nav_blog_active %}
{% block content %}
<div class="container">
  <div class="row">
    <!-- 设置在不同大小屏幕显示的大小 -->
    <div class="col-xs-12 col-sm-8 col-md-9 col-lg-9">
      <div class="panel panel-default">
        <div class="panel-heading">{{ blog_title }}</div>
        <div class="panel-body">
          {% for blog in current_page.object_list %}
          <div class="blog">
            <h3><a href="">{{ blog.title }}</a></h3>
            <p class="blog-info">
              <span class="glyphicon glyphicon-tag"></span>
              <a href="">{{ blog.blog_type }}</a>&nbsp;&nbsp;
              <span class="glyphicon glyphicon-time">{{ blog.created_time|date:'Y-m-d' }}</span>
            </p>
            <p>{{ blog.content|striptags|truncatechars:120 }}</p>
          </div>
          {% empty %}
          <div class="blog">
            <h3>暂无博客，敬请期待</h3>
          </div>
          {% endfor %}
        </div>
      </div>
      {# 分页 #}
      {% include "share_layout/pagination.html" %}
    </div>
    <div class="hidden-xs col-sm-4 col-md-3 col-lg-3">
      {# 按类型分类 #}
      <div class="panel panel-default">
        <div class="panel-heading">博客分类</div>
        <div class="panel-body">
          <ul class="blog-types">
            {% for blog_type in blog_type_list %}
            <li><a href="{% url 'blog:blog_with_type' blog_type.pk %}">{{ blog_type }}({{ blog_type.blog_count }})</a></li>
            {% empty %}
            <li>暂无分类</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {# 按月分类 #}
      <div class="panel panel-default">
        <div class="panel-heading">日期归档</div>
        <div class="panel-body">
          <ul class="blog-types">
            {% for blog_date,blog_count in blog_date_dict.items %}
            <li><a href="{% url 'blog:blog_with_date' blog_date.year blog_date.month %}">{{ blog_date|date:'Y-m' }}({{ blog_count }})</a></li>
            {% empty %}
            <li>暂无分类</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock content %}